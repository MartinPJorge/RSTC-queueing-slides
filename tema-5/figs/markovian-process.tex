\begin{tikzpicture}

    \draw (0,0) -- (5.5, 0) node[anchor=west] {$\ldots$};

    \draw[->] (6.5, 0) -- (9,0) node[pos=1,anchor=west] {time};
    \draw[->] (0,0) -- (0,4) node[pos=.5,above,rotate=90,] {$N(t)$ [usuarios]};

    \draw[HotPink3,ultra thick] (0.5,2) -- (1.5, 2)
        -- (1.5,1) -- (2.5, 1)
        -- (2.5, 2) -- (3.5, 2)
        -- (3.5, 4) -- (4.5, 4)
        -- (4.5, 3) -- (5.5, 3)
        -- (5.5, 1) node[anchor=west] {$\ldots$};

    \draw[HotPink3,ultra thick] (6.5, 1)
        -- (6.5, 2) -- (7.5, 2)
        -- (7.5, 3) -- (8.5, 3);


    \draw (1, .1) -- (1,-.1) node[below] {$0$};
    \node[circle,fill=HotPink4,inner sep=2pt,label=above:{$i_0=2$}] at (1, 2) {};

    \draw (2, .1) -- (2,-.1) node[below] {$1$};
    \node[circle,fill=HotPink4,inner sep=2pt,label=below:{$i_1=1$}] at (2, 1) {};

    \draw (3, .1) -- (3,-.1) node[below] {$2$};
    \node[circle,fill=HotPink4,inner sep=2pt] at (3, 2) (t2) {};
    \node[anchor=north west] at (t2) {$i_2=2$};

    \draw (4, .1) -- (4,-.1) node[below] {$3$};
    \node[circle,fill=HotPink4,inner sep=2pt,label=above:{$i_3=4$}] at (4, 4) {};

    \draw (5, .1) -- (5,-.1) node[below] {$4$};
    \node[circle,fill=HotPink4,inner sep=2pt] (t4) at (5, 3) {};
    \node[anchor=south west] at (t4) {$i_4=3$};


    % Prior-to-last state
    \draw (7, .1) -- (7,-.1) node[below] {$t-1$};
    \only<1>{\node[circle,fill=HotPink4,inner sep=2pt,label=below:{$\qquad i_{t-1}=2$}] at (7, 2) {}};
    \only<2->{\node[circle,fill=HotPink4,inner sep=4pt,label=below:{$\qquad i_{t-1}=2$}] (prior) at (7, 2) {}};

    % last state
    \draw (8, .1) -- (8,-.1) node[below] {$t$};
    \only<1>{\node[circle,fill=HotPink4,inner sep=2pt,label=above:{$i_t=3$}] at (8, 3) {}};
    \only<2->{\node[circle,fill=HotPink4,inner sep=4pt,label=above:{$i_t=3$}] (last) at (8, 3) {}};

    % Transition arrow
    \only<2->{\draw[->,very thick,dashed] (prior) to [out=0,in=270] (last);}


    \only<3>{%
        \filldraw [fill=blue, fill opacity=0.2, draw=none] (6.25,4.65) rectangle (0.3,0.3);%
        \node[fill=white] at (3,3) {Sin memoria};}


\end{tikzpicture}

